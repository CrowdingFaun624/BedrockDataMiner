// name "list modifier" is my invention.
{
    "group_aliases": {
        "temp": "structures/misc/template"
    },
    "list_modifier": {
        "type": "Switch",
        "switch_function": {
            "function_name": "get_key",
            "arguments": {
                "key": "mode"
            }
        },
        "$values_key": "values",
        "$value_types": "list",
        "substructures": {
            "append": {"types": "dict", "structure": "#!list_modifier.append{values=values, values_key=values_key, value_types=value_types}"},
            "insert": {"types": "dict", "structure": "#!list_modifier.insert{values=values, values_key=values_key, value_types=value_types}"},
            "replace_all": {"types": "dict", "structure": "#!list_modifier.replace_all{values=values, values_key=values_key, value_types=value_types}"},
            "replace_selection": {"types": "dict", "structure": "#!list_modifier.replace_selection{values=values, values_key=values_key, value_types=value_types}"}
        }
    },
    "list_modifier:all": {
        "type": "Keymap",
        "keys": {
            "function": {"types": "str", "delegate_arguments": {"always_print": true}},
            "#values_key": {"types": "#value_types", "structure": "#values"},
            "mode": {"types": "str", "delegate_arguments": {"always_print": true}},
            "entity": {"types": "str"} // only in some places does this key exist
        }
    },
    "list_modifier.append": {
        "inherit": "temp/SortedKeymap",
        "imports": "#!list_modifier:all{values=values, values_key=values_key, value_types=value_types}"
    },
    "list_modifier.insert": {
        "inherit": "temp/SortedKeymap",
        "imports": "#!list_modifier:all{values=values, values_key=values_key, value_types=value_types}",
        "keys": {
            "offset": {"types": "int"}
        }
    },
    "list_modifier.replace_all": {
        "inherit": "temp/SortedKeymap",
        "imports": "#!list_modifier:all{values=values, values_key=values_key, value_types=value_types}"
    },
    "list_modifier.replace_selection": {
        "inherit": "temp/SortedKeymap",
        "imports": "#!list_modifier:all{values=values, values_key=values_key, value_types=value_types}",
        "keys": {
            "offset": {"types": "int"},
            "size": {"types": "int"}
        }
    }
}